var flvjs;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(){this.tagType=-1,this.dataSize=-1,this.Timestamp=-1,this.StreamID=-1,this.body=-1,this.time=-1,this.arr=[],this.size=-1}t.r(e),t.d(e,{createFlv:()=>r});const i=new function(){const t=this;function e(e){const n=t.tempUint8.slice(t.index,t.index+e);return t.index+=e,n}function i(){for(;t.index<t.tempUint8.length&&!t.stop;){t.offset=t.index;const i=new n;t.tempUint8.length-t.index>=11?(i.tagType=e(1)[0],i.dataSize=e(3),i.Timestamp=e(4),i.StreamID=e(3),t.tempUint8.length-t.index>=r(i.dataSize)+4?(i.body=e(r(i.dataSize)),9==i.tagType&&t._hasVideo&&t.arrTag.push(i),8==i.tagType&&t._hasAudio&&t.arrTag.push(i),18==i.tagType&&(0==t.arrTag.length?t.arrTag.push(i):console.log("这是截获的自定义数据",i)),i.size=e(4),t.offset=t.index,console.log("==> parse",t.offset,i)):t.stop=!0):t.stop=!0}return t.offset}function r(t){let e="";return e+=1==t[0].toString(16).length?"0"+t[0].toString(16):t[0].toString(16),e+=1==t[1].toString(16).length?"0"+t[1].toString(16):t[1].toString(16),e+=1==t[2].toString(16).length?"0"+t[2].toString(16):t[2].toString(16),parseInt(e,16)}return this.tempUint8=new Uint8Array,this.arrTag=[],this.index=0,this.tempArr=[],this.stop=!1,this.offset=0,this.frist=!0,this._hasAudio=!1,this._hasVideo=!1,{acceptFlv:function(n){return t.stop=!1,t.arrTag=[],t.index=0,t.tempUint8=n,t.tempUint8.length>13&&70==t.tempUint8[0]&&76==t.tempUint8[1]&&86==t.tempUint8[2]?(function(t){const e=new Uint8Array(t),n={match:!1};if(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])return n;const i=(4&e[4])>>>2!=0,r=0!=(1&e[4])}(t.tempUint8.buffer),e(9),e(4),i(),t.frist=!1,t.offset):t.frist?t.offset:i()},get arrTag(){return t.arrTag}}};function r(){let t=!0;return this._onInitSegment=null,this._onMediaSegment=null,this._onMediaInfo=null,{setFlv:function(e){const n=t?function(e){t=!1;let n=i.acceptFlv(new Uint8Array(e));if(18!=i.arrTag[0].tagType)throw new Error("without metadata tag");return i.arrTag.length,n}(e):function(t){const e=i.acceptFlv(new Uint8Array(t));return i.arrTag.length,e}(e);return n},set onInitSegment(t){this._onInitSegment=t},set onMediaSegment(t){this._onMediaSegment=t},set onMediaInfo(t){this._onMediaInfo=t}}}flvjs=e})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0YsTUFBTSxJQUFJYyxNQUFNLHdCQVVsQixPQVJJLGdCQVFHOUIsRUFuQmtCK0IsQ0FBZ0JmLEdBc0IzQyxTQUEyQkEsR0FDekIsTUFBTWhCLEVBQVMsWUFBbUIsSUFBSVksV0FBV0ksSUFNakQsT0FKSSxnQkFJR2hCLEVBN0IyQ2dDLENBQWtCaEIsR0FDcEUsT0FBT2hCLEdBaUNIaUMsa0JBQWNDLEdBQ2hCcEQsS0FBSzRDLGVBQWlCUSxHQUdwQkMsbUJBQWVELEdBQ2pCcEQsS0FBSzZDLGdCQUFrQk8sR0FHckJFLGdCQUFZRixHQUNkcEQsS0FBSzhDLGFBQWVNLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbHZqcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9mbHZqcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZmx2anMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9mbHZqcy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2ZsdmpzLy4vZmx2LmpzL2NvcmUvZmx2LXRhZy5qcyIsIndlYnBhY2s6Ly9mbHZqcy8uL2Zsdi5qcy9jb3JlL2Zsdi1wYXJzZS5qcyIsIndlYnBhY2s6Ly9mbHZqcy8uL2Zsdi5qcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZsdlRhZygpIHtcbiAgdGhpcy50YWdUeXBlID0gLTFcbiAgdGhpcy5kYXRhU2l6ZSA9IC0xXG4gIHRoaXMuVGltZXN0YW1wID0gLTFcbiAgdGhpcy5TdHJlYW1JRCA9IC0xXG4gIHRoaXMuYm9keSA9IC0xXG4gIHRoaXMudGltZSA9IC0xXG4gIHRoaXMuYXJyID0gW11cbiAgdGhpcy5zaXplID0gLTFcbiAgXG4gIGZ1bmN0aW9uIGdldFRpbWUoKSB7XG4gICAgLy8gdGhpcy5UaW1lc3RhbXAucG9wKCk7XG4gICAgdGhpcy5hcnIgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5UaW1lc3RhbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYXJyLnB1c2godGhpcy5UaW1lc3RhbXBbaV0udG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxID8gJzAnICsgdGhpcy5UaW1lc3RhbXBbaV0udG9TdHJpbmcoMTYpIDogdGhpcy5UaW1lc3RhbXBbaV0udG9TdHJpbmcoMTYpKVxuICAgIH1cbiAgICB0aGlzLmFyci5wb3AoKVxuICAgIGNvbnN0IHRpbWUgPSB0aGlzLmFyci5qb2luKCcnKVxuICAgIHRoaXMudGltZSA9IHBhcnNlSW50KHRpbWUsIDE2KVxuICAgIHJldHVybiBwYXJzZUludCh0aW1lLCAxNilcbiAgfVxufVxuIiwiaW1wb3J0IGZsdlRhZyBmcm9tICcuL2Zsdi10YWcnXG5cbmZ1bmN0aW9uIEZsdlBhcnNlKCkge1xuICBjb25zdCBfdGhpcyA9IHRoaXNcbiAgdGhpcy50ZW1wVWludDggPSBuZXcgVWludDhBcnJheSgpXG4gIHRoaXMuYXJyVGFnID0gW11cbiAgdGhpcy5pbmRleCA9IDBcbiAgdGhpcy50ZW1wQXJyID0gW11cbiAgdGhpcy5zdG9wID0gZmFsc2VcbiAgdGhpcy5vZmZzZXQgPSAwXG4gIHRoaXMuZnJpc3QgPSB0cnVlXG4gIHRoaXMuX2hhc0F1ZGlvID0gZmFsc2VcbiAgdGhpcy5faGFzVmlkZW8gPSBmYWxzZVxuXG4gIGZ1bmN0aW9uIGFjY2VwdEZsdih1aW50OCkge1xuICAgIF90aGlzLnN0b3AgPSBmYWxzZVxuICAgIF90aGlzLmFyclRhZyA9IFtdXG4gICAgX3RoaXMuaW5kZXggPSAwXG4gICAgX3RoaXMudGVtcFVpbnQ4ID0gdWludDhcbiAgICAvKiDmmK/lkKbliJ3mrKEgYnVmZmVyLCAxM+S4uuWGheWuueS9k+WJjeWtmOWcqOWtl+iKgiwg5YmNM+Wtl+iKguS4uuaWh+S7tuagh+ivhiwgRkxW5qC85byP5Li6KDB4NDYsIDB4NGMsIDB4NjYpID0+ICg3MCwgNzYsIDg2KSAqL1xuICAgIGlmIChfdGhpcy50ZW1wVWludDgubGVuZ3RoID4gMTMgJiYgX3RoaXMudGVtcFVpbnQ4WzBdID09IDcwICYmIF90aGlzLnRlbXBVaW50OFsxXSA9PSA3NiAmJiBfdGhpcy50ZW1wVWludDhbMl0gPT0gODYpIHtcbiAgICAgIHByb2JlKF90aGlzLnRlbXBVaW50OC5idWZmZXIpXG4gICAgICByZWFkKDkpIC8vIOeVpeaOiTnkuKrlrZfoioLnmoRmbHYgaGVhZGVyIHRhZ1xuICAgICAgcmVhZCg0KSAvLyDnlaXmjonnrKzkuIDkuKo05a2X6IqC55qEIHRhZyBzaXplXG4gICAgICBwYXJzZSgpXG4gICAgICBfdGhpcy5mcmlzdCA9IGZhbHNlXG4gICAgICByZXR1cm4gX3RoaXMub2Zmc2V0XG4gICAgfSBlbHNlIGlmICghX3RoaXMuZnJpc3QpIHtcbiAgICAgIHJldHVybiBwYXJzZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBfdGhpcy5vZmZzZXRcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcm9iZShidWZmZXIpIHtcbiAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKVxuICAgIGNvbnN0IG1pc21hdGNoID0geyBtYXRjaDogZmFsc2UgfVxuXG4gICAgLyog5Yik5pat5piv5ZCmIEZMViDmlofku7bmoIflv5cgKi9cbiAgICBpZiAoZGF0YVswXSAhPT0gMHg0NiB8fCBkYXRhWzFdICE9PSAweDRjIHx8IGRhdGFbMl0gIT09IDB4NTYgfHwgZGF0YVszXSAhPT0gMHgwMSkge1xuICAgICAgcmV0dXJuIG1pc21hdGNoXG4gICAgfVxuXG4gICAgLyogZGF0YVs0XeS4ujHlrZfoioIsIOWJjTXkvY3kv53nlZksIOW/hemhu+S4ujDjgILnrKw25L2N6KGo56S65piv5ZCm5a2Y5Zyo6Z+z6aKRVGFn44CC56ys5LiD5L2N5L+d55WZLCDlv4XpobvkuLow44CC56ysOOS9jeihqOekuuaYr+WQpuWtmOWcqOinhumikVRhZ+OAgiAqL1xuICAgIGNvbnN0IGhhc0F1ZGlvID0gKGRhdGFbNF0gJiA0KSA+Pj4gMiAhPT0gMFxuICAgIGNvbnN0IGhhc1ZpZGVvID0gKGRhdGFbNF0gJiAxKSAhPT0gMFxuXG4gICAgaWYgKCFoYXNBdWRpbyAmJiAhaGFzVmlkZW8pIHtcbiAgICAgIHJldHVybiBtaXNtYXRjaFxuICAgIH1cbiAgICAvLyBfdGhpcy5faGFzQXVkaW8gPSB0YWdkZW11eC5faGFzQXVkaW8gPSBoYXNBdWRpb1xuICAgIC8vIF90aGlzLl9oYXNWaWRlbyA9IHRhZ2RlbXV4Ll9oYXNWaWRlbyA9IGhhc1ZpZGVvXG4gICAgcmV0dXJuIHtcbiAgICAgIG1hdGNoOiB0cnVlLFxuICAgICAgaGFzQXVkaW9UcmFjazogaGFzQXVkaW8sXG4gICAgICBoYXNWaWRlb1RyYWNrOiBoYXNWaWRlbyxcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkKGxlbmd0aCkge1xuICAgIGNvbnN0IHU4YSA9IF90aGlzLnRlbXBVaW50OC5zbGljZShfdGhpcy5pbmRleCwgX3RoaXMuaW5kZXggKyBsZW5ndGgpXG4gICAgX3RoaXMuaW5kZXggKz0gbGVuZ3RoXG4gICAgcmV0dXJuIHU4YVxuICB9XG5cbiAgLyoqXG4gICAqIOW8gOWni+ino+aekFxuICAgKi9cbiAgZnVuY3Rpb24gcGFyc2UoKSB7XG4gICAgd2hpbGUgKF90aGlzLmluZGV4IDwgX3RoaXMudGVtcFVpbnQ4Lmxlbmd0aCAmJiAhX3RoaXMuc3RvcCkge1xuICAgICAgX3RoaXMub2Zmc2V0ID0gX3RoaXMuaW5kZXhcblxuICAgICAgY29uc3QgdCA9IG5ldyBmbHZUYWcoKVxuICAgICAgaWYgKF90aGlzLnRlbXBVaW50OC5sZW5ndGggLSBfdGhpcy5pbmRleCA+PSAxMSkge1xuICAgICAgICAvKiAx5a2X6IqCLCBUYWfnsbvlnossIOWMheaLrOmfs+mikSgweDA4ID0+IDgpLCDop4bpopEoMHgwOSA9PiA5KeWSjHNjcmlwdCBkYXRhKDB4MTIgPT4gMTgpICovXG4gICAgICAgIHQudGFnVHlwZSA9IHJlYWQoMSlbMF1cbiAgICAgICAgLyogM+Wtl+iKgiwg6KGo56S66K+lVGFnIGRhdGHpg6jliIbnmoTlpKflsI8gKi9cbiAgICAgICAgdC5kYXRhU2l6ZSA9IHJlYWQoMylcbiAgICAgICAgLyogM+Wtl+iKgiwg6KGo56S66K+lVGFn55qE5pe26Ze05oizLCAx5a2X6IqC6KGo56S65pe26Ze05oiz55qE5ouT5bGV5a2X6IqCKi9cbiAgICAgICAgdC5UaW1lc3RhbXAgPSByZWFkKDQpXG4gICAgICAgIC8qIDPlrZfoioIgU3RyZWFtSUQgKi9cbiAgICAgICAgdC5TdHJlYW1JRCA9IHJlYWQoMylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLnN0b3AgPSB0cnVlXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICAvKiA05a2X6IqC6KGo56S65LiL5LiA5LiqVGFnIHNpemUgKi9cbiAgICAgIGlmIChfdGhpcy50ZW1wVWludDgubGVuZ3RoIC0gX3RoaXMuaW5kZXggPj0gZ2V0Qm9keVN1bSh0LmRhdGFTaXplKSArIDQpIHtcbiAgICAgICAgdC5ib2R5ID0gcmVhZChnZXRCb2R5U3VtKHQuZGF0YVNpemUpKSAvLyDlj5blh7pib2R5XG4gICAgICAgIGlmICh0LnRhZ1R5cGUgPT0gOSAmJiBfdGhpcy5faGFzVmlkZW8pIHtcbiAgICAgICAgICBfdGhpcy5hcnJUYWcucHVzaCh0KVxuICAgICAgICB9XG4gICAgICAgIGlmICh0LnRhZ1R5cGUgPT0gOCAmJiBfdGhpcy5faGFzQXVkaW8pIHtcbiAgICAgICAgICBfdGhpcy5hcnJUYWcucHVzaCh0KVxuICAgICAgICB9XG4gICAgICAgIGlmICh0LnRhZ1R5cGUgPT0gMTgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMuYXJyVGFnLmxlbmd0aCA9PSAwKSBfdGhpcy5hcnJUYWcucHVzaCh0KVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+i/meaYr+aIquiOt+eahOiHquWumuS5ieaVsOaNricsIHQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIOS4i+S4gOS4qlRhZyBzaXplICovXG4gICAgICAgIHQuc2l6ZSA9IHJlYWQoNClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLnN0b3AgPSB0cnVlXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBfdGhpcy5vZmZzZXQgPSBfdGhpcy5pbmRleFxuICAgICAgY29uc29sZS5sb2coJz09PiBwYXJzZScsIF90aGlzLm9mZnNldCwgdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzLm9mZnNldFxuICB9XG5cbiAgLyoqXG4gICAqIOiuoeeul3RhZ+WMheS9k+Wkp+Wwj1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Qm9keVN1bShhcnIpIHtcbiAgICBsZXQgX3N0ciA9ICcnXG4gICAgX3N0ciArPSBhcnJbMF0udG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxID8gJzAnICsgYXJyWzBdLnRvU3RyaW5nKDE2KSA6IGFyclswXS50b1N0cmluZygxNilcbiAgICBfc3RyICs9IGFyclsxXS50b1N0cmluZygxNikubGVuZ3RoID09IDEgPyAnMCcgKyBhcnJbMV0udG9TdHJpbmcoMTYpIDogYXJyWzFdLnRvU3RyaW5nKDE2KVxuICAgIF9zdHIgKz0gYXJyWzJdLnRvU3RyaW5nKDE2KS5sZW5ndGggPT0gMSA/ICcwJyArIGFyclsyXS50b1N0cmluZygxNikgOiBhcnJbMl0udG9TdHJpbmcoMTYpXG4gICAgcmV0dXJuIHBhcnNlSW50KF9zdHIsIDE2KVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhY2NlcHRGbHYsXG5cbiAgICBnZXQgYXJyVGFnKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmFyclRhZ1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgRmx2UGFyc2UoKVxuIiwiaW1wb3J0IGZsdlBhcnNlIGZyb20gJy4vY29yZS9mbHYtcGFyc2UnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGbHYoKSB7XG4gIGxldCBpc0ZpcnN0ID0gdHJ1ZVxuICB0aGlzLl9vbkluaXRTZWdtZW50ID0gbnVsbFxuICB0aGlzLl9vbk1lZGlhU2VnbWVudCA9IG51bGxcbiAgdGhpcy5fb25NZWRpYUluZm8gPSBudWxsXG5cbiAgZnVuY3Rpb24gc2V0Rmx2KHVpbnQ4KSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaXNGaXJzdCA/IHNldGZsdkJhc2VmcmlzdCh1aW50OCkgOiBzZXRmbHZCYXNlVXN1YWxseSh1aW50OClcbiAgICByZXR1cm4gb2Zmc2V0XG4gIH1cblxuICBmdW5jdGlvbiBzZXRmbHZCYXNlZnJpc3QodWludDgpIHtcbiAgICBpc0ZpcnN0ID0gZmFsc2VcbiAgICBsZXQgb2Zmc2V0ID0gZmx2UGFyc2UuYWNjZXB0Rmx2KG5ldyBVaW50OEFycmF5KHVpbnQ4KSlcbiAgICAvLyBjb25zb2xlLmxvZygnPT0+IGZsdlBhcnNlJywgZmx2UGFyc2UpXG4gICAgaWYgKGZsdlBhcnNlLmFyclRhZ1swXS50YWdUeXBlICE9IDE4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dpdGhvdXQgbWV0YWRhdGEgdGFnJylcbiAgICB9XG4gICAgaWYgKGZsdlBhcnNlLmFyclRhZy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyB0YWdkZW11eC5oYXNBdWRpbyA9IHRoaXMuaGFzQXVkaW8gPSBmbHZQYXJzZS5faGFzQXVkaW9cbiAgICAgIC8vIHRhZ2RlbXV4Lmhhc1ZpZGVvID0gdGhpcy5oYXNWaWRlbyA9IGZsdlBhcnNlLl9oYXNWaWRlb1xuICAgICAgLy8gaWYgKHRoaXMuX3RlbXBCYXNlVGltZSAhPSAwICYmIHRoaXMuX3RlbXBCYXNlVGltZSA9PSBmbHZQYXJzZS5hcnJUYWdbMF0uZ2V0VGltZSgpKSB7XG4gICAgICAvLyAgIHRhZ2RlbXV4Ll90aW1lc3RhbXBCYXNlID0gMFxuICAgICAgLy8gfVxuICAgICAgLy8gdGFnZGVtdXgubW9vZlRhZyhmbHZQYXJzZS5hcnJUYWcpXG4gICAgfVxuICAgIHJldHVybiBvZmZzZXRcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldGZsdkJhc2VVc3VhbGx5KHVpbnQ4KSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZmx2UGFyc2UuYWNjZXB0Rmx2KG5ldyBVaW50OEFycmF5KHVpbnQ4KSlcblxuICAgIGlmIChmbHZQYXJzZS5hcnJUYWcubGVuZ3RoID4gMCkge1xuICAgICAgLy8gdGFnZGVtdXgubW9vZlRhZyhmbHZQYXJzZS5hcnJUYWcpXG4gICAgfVxuXG4gICAgcmV0dXJuIG9mZnNldFxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRGbHYsXG4gICAgc2V0IG9uSW5pdFNlZ21lbnQoZnVuKSB7XG4gICAgICB0aGlzLl9vbkluaXRTZWdtZW50ID0gZnVuXG4gICAgfSxcblxuICAgIHNldCBvbk1lZGlhU2VnbWVudChmdW4pIHtcbiAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50ID0gZnVuXG4gICAgfSxcblxuICAgIHNldCBvbk1lZGlhSW5mbyhmdW4pIHtcbiAgICAgIHRoaXMuX29uTWVkaWFJbmZvID0gZnVuXG4gICAgfSxcbiAgfVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIkZsdlRhZyIsInRoaXMiLCJ0YWdUeXBlIiwiZGF0YVNpemUiLCJUaW1lc3RhbXAiLCJTdHJlYW1JRCIsImJvZHkiLCJ0aW1lIiwiYXJyIiwic2l6ZSIsIl90aGlzIiwicmVhZCIsImxlbmd0aCIsInU4YSIsInRlbXBVaW50OCIsInNsaWNlIiwiaW5kZXgiLCJwYXJzZSIsInN0b3AiLCJvZmZzZXQiLCJ0IiwiZ2V0Qm9keVN1bSIsIl9oYXNWaWRlbyIsImFyclRhZyIsInB1c2giLCJfaGFzQXVkaW8iLCJjb25zb2xlIiwibG9nIiwiX3N0ciIsInRvU3RyaW5nIiwicGFyc2VJbnQiLCJVaW50OEFycmF5IiwidGVtcEFyciIsImZyaXN0IiwiYWNjZXB0Rmx2IiwidWludDgiLCJidWZmZXIiLCJkYXRhIiwibWlzbWF0Y2giLCJtYXRjaCIsImhhc0F1ZGlvIiwiaGFzVmlkZW8iLCJwcm9iZSIsImNyZWF0ZUZsdiIsImlzRmlyc3QiLCJfb25Jbml0U2VnbWVudCIsIl9vbk1lZGlhU2VnbWVudCIsIl9vbk1lZGlhSW5mbyIsInNldEZsdiIsIkVycm9yIiwic2V0Zmx2QmFzZWZyaXN0Iiwic2V0Zmx2QmFzZVVzdWFsbHkiLCJvbkluaXRTZWdtZW50IiwiZnVuIiwib25NZWRpYVNlZ21lbnQiLCJvbk1lZGlhSW5mbyJdLCJzb3VyY2VSb290IjoiIn0=